// Copyright 2018-present 650 Industries. All rights reserved.

#import <Foundation/Foundation.h>
<<<<<<< HEAD
#import <UMCore/UMModuleRegistry.h>
=======
#import <ExpoModulesCore/EXModuleRegistry.h>

// Many headers of permissions requesters have refs to `UMPromise*Block` without importing
// the header declaring it, so we fix it here, but this definitely needs to be removed.
#import <ExpoModulesCore/EXUnimodulesCompat.h>
>>>>>>> e75a71e2c6ac3e5d484a463ebda2ebf8c6ccb707

typedef enum EXPermissionStatus {
  EXPermissionStatusDenied,
  EXPermissionStatusGranted,
  EXPermissionStatusUndetermined,
} EXPermissionStatus;


@protocol EXPermissionsRequester <NSObject>

+ (NSString *)permissionType;

<<<<<<< HEAD
- (void)requestPermissionsWithResolver:(UMPromiseResolveBlock)resolve rejecter:(UMPromiseRejectBlock)reject;
=======
- (void)requestPermissionsWithResolver:(EXPromiseResolveBlock)resolve rejecter:(EXPromiseRejectBlock)reject;
>>>>>>> e75a71e2c6ac3e5d484a463ebda2ebf8c6ccb707

- (NSDictionary *)getPermissions;

@end

@protocol EXPermissionsInterface

- (void)registerRequesters:(NSArray<id<EXPermissionsRequester>> *)newRequesters;

- (void)getPermissionUsingRequesterClass:(Class)requesterClass
<<<<<<< HEAD
                                 resolve:(UMPromiseResolveBlock)resolve
                                  reject:(UMPromiseRejectBlock)reject;
=======
                                 resolve:(EXPromiseResolveBlock)resolve
                                  reject:(EXPromiseRejectBlock)reject;
>>>>>>> e75a71e2c6ac3e5d484a463ebda2ebf8c6ccb707

- (BOOL)hasGrantedPermissionUsingRequesterClass:(Class)requesterClass;

- (void)askForPermissionUsingRequesterClass:(Class)requesterClass
<<<<<<< HEAD
                                    resolve:(UMPromiseResolveBlock)resolve
                                     reject:(UMPromiseRejectBlock)reject;
=======
                                    resolve:(EXPromiseResolveBlock)resolve
                                     reject:(EXPromiseRejectBlock)reject;
>>>>>>> e75a71e2c6ac3e5d484a463ebda2ebf8c6ccb707

- (id<EXPermissionsRequester>)getPermissionRequesterForType:(NSString *)type;

@end
